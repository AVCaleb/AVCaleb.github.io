% !TEX program = xelatex
\documentclass[12pt, a4paper]{book}

% Geometry
\usepackage[margin=2.5cm]{geometry}

% ============================================
% IMPORTANT: Load these packages BEFORE polyglossia/bidi
% The bidi package (loaded by polyglossia for Hebrew) requires
% xcolor and graphicx to be loaded first.
% It also requires hyperref, fancyhdr, pgf, tikz, titlesec to be loaded BEFORE it.
% ============================================
\usepackage{graphicx}
\usepackage{xcolor}
\definecolor{accentcolor}{RGB}{52, 152, 219}
\definecolor{lightgray}{RGB}{245, 245, 245}

% Unicode and fonts
\usepackage{fontspec}
\usepackage{xeCJK}

% Set fonts
\setmainfont{Times New Roman}
\setsansfont{Helvetica Neue}
\setmonofont{Palatino}
\setCJKmainfont{STSong}
\setCJKsansfont{STHeiti}
\setCJKmonofont{STHeiti} % Use CJK sans (Heiti) for monospaced Chinese text

% Typography
\usepackage{setspace}
\setstretch{1.3}
\setlength{\parskip}{0.8em}
\setlength{\parindent}{2em}

% Headers and footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{圣经概要}
\fancyhead[LO]{\leftmark}
\renewcommand{\headrulewidth}{0.4pt}

% Chapter styling
\usepackage{titlesec}
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries\centering}
  {\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}

% Boxes for scripture
\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable}

% For parallel text
\usepackage{paracol}

% Hyperlinks
\usepackage[bookmarks=true]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=accentcolor,
    urlcolor=accentcolor,
    pdfauthor={Bible Synopsis},
    pdftitle={圣经概要}
}

% Greek and Hebrew support (loads bidi package internally)
% MUST BE LOADED AFTER hyperref, fancyhdr, etc.
\usepackage{polyglossia}
\setmainlanguage{english}
\setotherlanguage{greek}
\setotherlanguage{hebrew}
\newfontfamily\greekfont{Times New Roman}
\newfontfamily\hebrewfont{Times New Roman}

% Table of contents depth
\setcounter{tocdepth}{2}

% Custom commands
\newcommand{\scripture}[1]{%
    \begin{tcolorbox}[
        enhanced,
        colback=accentcolor!8,
        colframe=white,
        boxrule=0.5pt,
        sharp corners,
        left=10pt,
        right=0pt,
        top=10pt,
        bottom=10pt,
        boxsep=0pt,
        breakable
    ]
    \ttfamily #1
    \end{tcolorbox}
}


% Bilingual paragraph environment
\newenvironment{bilingualblock}{%
    \par\vspace{0.5em}
    \begin{tcolorbox}[
        colback=lightgray,
        colframe=lightgray,
        arc=2mm,
        boxrule=0pt,
        left=12pt,
        right=12pt,
        top=10pt,
        bottom=10pt,
        breakable
    ]
}{%
    \end{tcolorbox}
    \par\vspace{0.5em}
}

\newcommand{\originaltext}[1]{%
    \noindent\textcolor{accentcolor}{\rule{3pt}{1em}}\hspace{8pt}%
    #1\par\vspace{0.3em}
}

\newcommand{\translatedtext}[1]{%
    \noindent\textcolor{gray}{\rule{3pt}{1em}}\hspace{8pt}%
    #1\par
}

% Footnotes
\usepackage[bottom]{footmisc}
\renewcommand{\footnoterule}{\vfill\kern-3pt\hrule width 0.4\columnwidth\kern2.6pt}

\begin{document}

\begin{titlepage}
\centering
\vspace*{3cm}

{\Huge\bfseries 圣经概要}

\vspace{0.5cm}

{\Large\textit{Bible Synopsis}}

\vspace{2cm}

{\large 达秘}

\vspace{0.5cm}

{\large J. N. Darby}

\vfill

{\large 1900 年版  \n\n \ttfamily Published in 1900}

\end{titlepage}

\tableofcontents
\newpage

\chapter{创造 \\ \normalsize\textit{The Creation}}

\scripture{Ἐν ἀρχῇ ἐποίησεν ὁ θεὸς τὸν οὐρανὸν καὶ τὴν γῆν \\ \textit{In the beginning God created the heaven and the earth}}


\begin{bilingualblock}
\originaltext{In the beginning God created the heaven and the earth.}
\translatedtext{起初，神创造天地。}
\end{bilingualblock}

\vspace{1em}
\noindent\rule{\textwidth}{0.4pt}
\small
\begin{enumerate}
\item[1] Creation ex nihilo / 创造万有

\end{enumerate}
\normalsize

\end{document}
